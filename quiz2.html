<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>quiz2</title>
</head>
<body>
    <h2>Quiz2</h2>
    <div id="quiz"></div>
        <button id="submit" onclick="buildResult(quizArr)">Submit</button>
    <div id="result"></div>
</body>

<script>
    const quizDisplay = document.getElementById('quiz');
    const submitBtn = document.getElementById('submit');
    const resultDisplay = document.getElementById('result');

    //quiz 20문제
    const quizData =[
        {
            question: 'javaScript에 type을 추가한 스크립트',
            answers:{
                a: "typescript",
                b: "bbb",
                c: "ccc"
            },correct : 'a'
        },
        {
            question: '스크립트를 표준화 문서',
            answers:{
                a: "aaa",
                b: "ECMA",
                c: "ccc"
            },correct : 'b'
        },
        {
            question: '자바스크립트에서 상수를 권장하는 이유',
            answers:{
                a: "aaa",
                b: "bbb",
                c: "해킹을 방지하고, 개발자 실수를 방지하기 위해"
            },correct : 'c'
        },
        {
            question: '사용자에게 메시지를 보여주고, 확인을 기다리는 자바스크립트 대화상자',
            answers:{
                a: "alert()",
                b: "bbb",
                c: "ccc"
            },correct : 'a'
        },
        {
            question: '사용자에게 메시지를 보여주고, 확인이나 취소를 누르면 그 결과를 불린값으로 반환',
            answers:{
                a: "aaa",
                b: "confirm()",
                c: "ccc"
            },correct : 'b'
        },
        {
            question: '사용자에게 메시지를 보여주고, 사용자가 입력한 문자열을 반환입력받은 값은 문자형으로 저장',
            answers:{
                a: "aaa",
                b: "bbb",
                c: "prompt()"
            },correct : 'c'
        },
        {
            question: '두 식이 값이 같고, 타입까지 같으면 참을 뜻하는 비교 연산자',
            answers:{
                a: "===",
                b: "bbb",
                c: "ccc"
            },correct : 'a'
        },
        {
            question: '두 식의 값이 다르고, 타입까지 다르면 참을 뜻하는 비교 연산자',
            answers:{
                a: "aaa",
                b: "!==",
                c: "ccc"
            },correct : 'b'
        },
        {
            question: '이름과 인덱스로 참조되는 정렬된 값의 집합(자료구조)',
            answers:{
                a: "aaa",
                b: "bbb",
                c: "배열(Array)"
            },correct : 'c'
        },
        {
            question: '배열의 요소를 추가하는 Array 객체의 메소드',
            answers:{
                a: "push()",
                b: "bbb",
                c: "ccc"
            },correct : 'a'
        },
        {
            question: '배열의 마지막 주소에 있는 값을 제거하는 Array 객체의 메소드',
            answers:{
                a: "aaa",
                b: "pop()",
                c: "ccc"
            },correct : 'b'
        },
        {
            question: '두 개의 배열을 합치는 Array 객체의 메소드',
            answers:{
                a: "aaa",
                b: "bbb",
                c: "contact()"
            },correct : 'c'
        },
        {
            question: '배열 요소 사이에 원하는 문자를 삽입하는 Array 객체의 메소드',
            answers:{
                a: "join()",
                b: "bbb",
                c: "ccc"
            },correct : 'a'
        },
        {
            question: '변수에 배열의 index 또는 객체의 key 가 저장하는 for문',
            answers:{
                a: "aaa",
                b: "for in 문",
                c: "ccc"
            },correct : 'b'
        },
        {
            question: '객체를 생성하는 방법 중 생성자를 이용하는 방법을 쓰면 리터럴 표기법에 비해 좋은 이유는?',
            answers:{
                a: "aaa",
                b: "bbb",
                c: "여러번 복사해서 만들기 좋음"
            },correct : 'c'
        },
        {
            question: '객체를 생성하는 방법 중 클래스를 이용하는 것과 생성자를 이용하는 것의 차이점은?',
            answers:{
                a: "클래스는 constructor와 메소드를 이용하고, 생성자는 this.프로퍼티명 = 값 or fuction(){} 형태르 바로 사용한다. 클래스를 이용한 객체생성 방법은 내부적으로 생성자를 이용한 객체 생성 방법과 동일하게 작동한다",
                b: "bbb",
                c: "ccc"
            },correct : 'a'
        },
        {
            question: '현재 존재하고 있는 객체의 프로토타입을 사용하여 해당 객체를 복사하고 재사용하는 것',
            answers:{
                a: "aaa",
                b: "상속",
                c: "ccc"
            },correct : 'b'
        },
        {
            question: '모든 객체는 ㅇㅇㅇㅇㅇ이라는 객체를 상속받아 가지고 있음',
            answers:{
                a: "aaa",
                b: "bbb",
                c: "프로토타입"
            },correct : 'c'
        },
        {
            question: 'Math 객체의 메소드로 소수점 첫번째 자리에서 반올림하여 그 결과를 리턴하는 것',
            answers:{
                a: "typescript",
                b: "bbb",
                c: "ccc"
            },correct : 'a'
        },
        {
            question: 'Math 객체의 메소드 min()이 비교할 수 없는 값이 포함되어있으면 ㅇㅇㅇ을 리턴',
            answers:{
                a: "aaa",
                b: "NaN",
                c: "ccc"
            },correct : 'b'
        }
        
    ];
    
    
    
        // let isPass= false
        // while(!isPass){
            quizArr = randomNum3();
            buildQuiz(quizArr);
            
        // }
    /* 20중 배열index 중복없이 3개 추출하기*/



    function randomNum3(){
        let randomArr = [ ];
        let i=0;
        let isNum3 = false;
        while(!isNum3){
            let randomNum = Math.floor(Math.random()*20)+1;
            if(! sameNum(randomNum)){
                randomArr.push(randomNum);
            }
            if(randomArr.length==3){
                isNum3=true;
            }
        }
        function sameNum(n){
            for( let i=0; i<randomArr.length; i++){
                if( n === randomArr[i]){
                    return true;
                }
            }
            return false;
        }
        return randomArr.sort();
    }

    function buildQuiz(arr){
        const output = [ ];
        for(i=0; i<arr.length; i++){
             //퀴즈 문제와 선택지가 저장될 배열
            let currentQuestion = quizData[arr[i]-1];
            const answers= [ ];
            for(item in currentQuestion.answers){
                answers.push(`<label><input type="radio" name="question${arr[i]-1}" value="${item}"> ${item} : ${currentQuestion.answers[item]}
                        </label>`);
            }
            output.push(`<div class="question"> ${currentQuestion.question}</div>
                        <div class="answer">${answers.join('')}</div>`);
                        quizDisplay.innerHTML = output.join(' <br>');
            }
        }
    
    function buildResult(arr){
        const result = [ ];
        const answerDisplays = quizDisplay.querySelectorAll('.answer'); 
        console.log(answerDisplays)
        let numCorrect = 0;
        for(i=0 ; i<arr.length; i++){
            const answerDisplay = answerDisplays[i];
            let currentQuestion = quizData[arr[i]-1];
            const selector = `input:checked`;
            const userAnswer = (answerDisplay.querySelector(selector)).value;

            if(userAnswer === currentQuestion.correct){  //user가 선택한 값과 정답 검증
                    answerDisplays[i].style.color = 'lightgreen';
                    numCorrect++;
            }else{
                    answerDisplays[i].style.color = 'red';
            }
        }
        if(numCorrect==3){
            isPass = false;
        }
    
    }

</script>   
</html>
